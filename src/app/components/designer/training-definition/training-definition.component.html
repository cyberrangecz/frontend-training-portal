<h2>Training Definition</h2>
<div class="train-def">

  <div class="train-def-buttons">
    <button mat-stroked-button color="primary"
            (click)="newTrainingDefinition()">
      New Training Definition
    </button>
    <button mat-stroked-button color="primary"
            (click)="uploadTrainingDefinition()">
      Upload Training Definition
    </button>
  </div>

  <div class="train-def-table">

    <mat-form-field>
      <input matInput (keyup)="applyFilter($event.target.value)" placeholder="Filter by title or status">
    </mat-form-field>

    <div class="mat-elevation-z8">
      <table mat-table [dataSource]="dataSource" matSort>

        <!-- TITLE Column -->
        <ng-container matColumnDef="title">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Title</th>
          <td mat-cell *matCellDef="let training"> {{training.title}}</td>
        </ng-container>

        <!-- DESCRIPTION Column -->
        <ng-container matColumnDef="description">
          <th mat-header-cell *matHeaderCellDef>Description</th>
          <td mat-cell *matCellDef="let training"> {{training.description}}</td>
        </ng-container>

        <!-- STATUS Column -->
        <ng-container matColumnDef="status">
          <th mat-header-cell *matHeaderCellDef>Status</th>
          <td mat-cell *matCellDef="let training"> {{training.state}}</td>
        </ng-container>

        <!-- AUTHORS Column -->
        <ng-container matColumnDef="authors">
          <th mat-header-cell *matHeaderCellDef>Authors</th>
          <td mat-cell *matCellDef="let training"> {{training.authors}}</td>
        </ng-container>

        <!--ACTIONS Column -->
        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>Actions</th>
          <td mat-cell *matCellDef="let training">

            <div class="action-buttons">
              <!-- EDIT button -->
              <button *ngIf="training.state === trainingStateEnum.Unreleased"
                      mat-icon-button color="primary"
                      (click)="editTrainingDefinition(training.id)">
                <mat-icon
                    matTooltip="Edit training definition"
                    aria-label="Edit training definition button">
                  create</mat-icon>
              </button>

              <!-- CLONE button -->
              <button *ngIf="training.state === trainingStateEnum.Released ||
                             training.state === trainingStateEnum.Archived"
                      mat-icon-button color="primary"
                      (click)="cloneTrainingDefinition(training.id)">
                <mat-icon
                    matTooltip="Clone training definition"
                    aria-label="Clone training definition button">
                  file_copy</mat-icon>
              </button>

                <!-- REMOVE button -->
              <button *ngIf="training.state === trainingStateEnum.Unreleased ||
                             training.state === trainingStateEnum.Archived"
                      mat-icon-button color="primary"
                      (click)="removeTrainingDefinition(training.id)">
                <mat-icon
                      matTooltip="Remove training definition"
                      aria-label="Remove training definition button"
                >delete</mat-icon>
              </button>

              <!-- DOWNLOAD button -->
                <button mat-icon-button color="primary"
                        (click)="downloadTrainingDefinition(training.id)">
                  <mat-icon
                    matTooltip="Download training definition"
                    aria-label="Download training definition button">
                    cloud_download</mat-icon>
                </button>

              <!-- ARCHIVE button -->

              <!-- TODO: Archive - change the state of the training definition to archived
              (trainingDefinition.state='archived'). This action disables instantiating
              the training definition in the organizer's view. Only those definition,
               which instances are all terminated can be archived, i.e., there must not be
               any active or scheduled instance of the training definition. -->
              <button mat-icon-button color="primary"
                      (click)="archiveTrainingDefinition(training.id)">
                <mat-icon
                  matTooltip="Archive training definition"
                  aria-label="Archive training definition button">
                  archive</mat-icon>
              </button>
            </div>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]"></mat-paginator>
    </div>
  </div>
</div>
