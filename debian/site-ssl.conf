<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerAdmin info@kypo.cz

    # Edit the following lines by hand/Ansible! #
    #############################################		
    #ServerName $FQDN
    #Redirect "/logout-confirmed" "https:/OidcUrl/oidc/Shibboleth.sso/Logout?return=https://ServerName/"
    SSLCertificateFile    /etc/ssl/certs/ssl-cert-snakeoil.pem
    SSLCertificateKeyFile /etc/ssl/private/ssl-cert-snakeoil.key
    SSLCACertificatePath  /etc/ssl/certs/
    #############################################	

    DocumentRoot /opt/kypo2/kypo2-trainings

    <Directory /opt/kypo2/kypo2-trainings/>
        Options Indexes FollowSymLinks
        AllowOverride None
        Require all granted
    </Directory>

    RewriteEngine On
    # If an existing asset or directory is requested go to it as it is
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -f [OR]
    RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} -d
    RewriteRule ^ - [L]
    # If the requested resource doesn't exist, use index.html
    RewriteRule ^ /index.html


    SSLEngine on

    ErrorLog ${APACHE_LOG_DIR}/kypo2-trainings-ssl-error.log
    LogLevel debug

    CustomLog ${APACHE_LOG_DIR}/kypo2-trainings-ssl-access.log combined

    Timeout 1800
    
    KeepAlive On
    MaxKeepAliveRequests 300
    KeepAliveTimeout 10

</VirtualHost>
</IfModule>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet

